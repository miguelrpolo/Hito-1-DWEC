<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="estilos.css">
</head>
<body>
    <form action="">
        
<div class="wrapper">
    <form id="form_ejemplo" onsubmit="return validateForm()">
      <h1>Formulario</h1>
      <h5>Formulario Hito 1 DWEC</h5>
      <hr class="sep"/>
      <div class="group">
        <input type="text" required="required"/><span class="highlight"></span><span class="bar"></span>
        <label>Nombre</label>
      </div>
      <div class="group">
        <input type="text" required="required"/><span class="highlight"></span><span class="bar"></span>
        <label>Apellidos</label>
      </div>
      <div class="group">
    <p id="fecha_texto">Fecha de Nacimiento</p>
        <input type="date" required="required"/><span class="highlight"></span><span class="bar"></span>
      </div>
      <h5>Color favorito</h5>
      <div class="group">
        <input type="color" required="required"/><span class="highlight"></span><span class="bar"></span>
      </div>
      <div class="btn-box">
        <button class="btn btn-submit" type="submit">Enviar</button>
        <button class="btn btn-cancel" type="button" onclick="limpiar()">Limmpiar</button>
      </div>
    </form>
    <h5 id="texto_a_cambiar">Rellena este formulario o Pulsa el botón de aquí abajo para autorellenar</h5>
    <p id="texto_tecnico">awgawgawgwa</p>

    <table id="tabla">
        <tr>
          <th>Nombre</th>
          <th>Apellidos</th>
          <th>Fecha de nacimiento</th>
          <th>Color favorito</th>
        </tr>
        <tr>
          <td>Alfreds Futterkiste</td>
          <td>Maria Anders</td>
          <td>2000-5-10</td>
          <td>#52f29a</td>
        </tr>
      </table>
  </div>
 
  <img src="imagen1.jpg" id="imagen" alt="Imagen1">


  <script>
var imagen = document.getElementById("imagen")
imagen.hidden = true;

var texto = document.getElementById("texto_tecnico").innerText = "Estás usando el navegador DETECTAR COSAS DE BOM"

function limpiar(){
lista_elementos = document.querySelectorAll("form div.group input");
lista_elementos.forEach(element => element.value="");
imagen.hidden = true;
}

function validateForm(e) {
    e.preventDefault();
bandera= true;
let resultado = "";
let nombre = document.querySelectorAll("div.group input[type='text']")[0].value;
let apellido = document.querySelectorAll("div.group input[type='text']")[1].value;
let fecha = document.querySelector("form div.group input[type='date']").value;
let color = document.querySelector("div.group input[type='color']").value;

if((/[0-9]{1}/g.test(nombre + apellido))){
resultado+="¡Vaya! un nombre o apellido con números. Creo que eso no está bien. Deberías cambiarlo"
}else{
resultado+="Gracias " + nombre + " " + apellido + " por registrarte en el formulario! Naciste el:"+ fecha + " y te gusta el color (en código) " + color + " ¡Disfruta de esta imagen de regalo!"
limpiar()
let tabla = document.querySelector("body div.wrapper table#tabla")
let row = tabla.insertRow(tabla.rows.length);

row.insertCell(0).innerHTML = nombre;
row.insertCell(1).innerHTML = apellido;
row.insertCell(2).innerHTML = fecha;
row.insertCell(3).innerHTML = color;


imagen.hidden = false;
imagen.src="imagen" +(Math.floor(Math.random() * 3)+1) + ".jpg";
console.log(imagen)
}
document.getElementById("texto_a_cambiar").innerText = resultado
return bandera;

}

  </script>

<script>

    var form = document.getElementsByTagName("form")[0];
    form.addEventListener('submit', validateForm);
      </script>
</body>
</html>